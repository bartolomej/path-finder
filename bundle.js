!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(5)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(1),n(2),n(3),n(4);const i="unvisited",s="visited",o="start",r="end",d="wall",a="path";class h{constructor(t){this.position=t,this.edges=null,this.type=i,this.domElement=null,this.visited=!1}get id(){return`${this.position[0]}-${this.position[1]}`}neighbours(t=!1){let e=[];if(this.type===d)return[];for(let n of this.edges)(n.type!==d||t)&&e.push(n);return e}visitedNeighbours(){const t=[];for(let e of this.edges)e.visited&&t.push(e);return t}unvisitedNeighbours(t=!1){const e=[];for(let n of this.edges)n.visited||n.type===d&&!t||e.push(n);return e}isStartOrEnd(){return this.type===o||this.type===r}mark(t){this.type=t,this.updateDom()}invert(){this.type===d?this.mark(i):this.type===i&&this.mark(d),this.updateDom()}reset(){this.visited=!1,this.type=i,this.updateDom()}equals(t){return t.id===this.id}updateDom(){this.domElement&&(this.domElement.classList=[this.type])}generateDom(){this.domElement=document.createElement("td"),this.domElement.id=this.id,this.domElement.class=this.type,this.updateDom()}static strIdToArray(t){return t.split("-").map(parseFloat)}static softReset(t){for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++)t[e][n].visited=!1}}function l(t,e=0){return Math.round(Math.random()*(t-e)+e)}function c(t){return new Promise(e=>{setTimeout(e,t)})}class u{constructor(t,e){this.nodes=e,this.parent=t,this.overNode=null,this.prevOverNode=null,this.mouseDown=!1,this.clickedTimestamp=null,this.onNodeOver=null,this.onNodeDrag=null,this.onNodeClick=null,this.registerListeners()}registerListeners(){this.parent.addEventListener("mousedown",this.onMouseDown.bind(this)),this.parent.addEventListener("mouseup",this.onMouseUp.bind(this)),this.onMouseOverNodeListeners()}onMouseOverNodeListeners(){for(let t=0;t<this.nodes.length;t++)for(let e=0;e<this.nodes[0].length;e++)this.nodes[t][e].domElement.addEventListener("mouseover",this.onMouseOverNode.bind(this))}onMouseOverNode(t){const e=h.strIdToArray(t.target.id);this.overNode=this.nodes[e[0]][e[1]],this.prevOverNode||(this.prevOverNode=this.overNode),m(this.onNodeOver,this.overNode),this.dragNode&&this.mouseDown&&m(this.onNodeDrag,[this.dragNode,this.overNode,this.prevOverNode]),this.prevOverNode=this.overNode}onMouseDown(t){var e;this.clickedTimestamp=t.timeStamp,this.mouseDown=!0,this.dragNode=null,this.dragNode=(e=this.overNode,Object.assign(Object.create(Object.getPrototypeOf(e)),e))}onMouseUp(t){this.mouseDown=!1,t.timeStamp-this.clickedTimestamp<500&&m(this.onNodeClick,this.overNode)}}function m(t,e){t&&"function"==typeof t&&(e instanceof Array?t.apply(null,e):t.apply(null,[e]))}class p{constructor(t,e){this.parent=e,this.dimensions=t,this.nodes=[],this.domElement=null,this.startNode=null,this.endNode=null,this.interaction=null}init(){if(!this.parent)throw new Error("Parent not set");this.initializeNodes(),this.initStartEndNodes(),this.initializeEdges(),this.generateDom(this.parent),this.initInteraction()}initInteraction(){this.interaction=new u(this.parent,this.nodes),this.interaction.onNodeDrag=(t,e,n)=>{const s=t.type;s!==o&&s!==r||(e.mark(s),n.mark(i),s===o&&(this.startNode=e),s===r&&(this.endNode=e)),e.isStartOrEnd()||t.isStartOrEnd()||e.invert()},this.interaction.onNodeClick=t=>{t.isStartOrEnd()||t.invert()}}resetPath(){for(let t=0;t<this.nodes.length;t++)for(let e=0;e<this.nodes[0].length;e++){const n=this.nodes[t][e];n.type===d||n.isStartOrEnd()||n.reset()}}reset(){for(let t=0;t<this.nodes.length;t++)for(let e=0;e<this.nodes[0].length;e++){this.nodes[t][e].reset()}this.initStartEndNodes()}initializeNodes(){for(let t=0;t<this.dimensions[1];t++){const e=[];for(let n=0;n<this.dimensions[0];n++)e.push(new h([t,n]));this.nodes.push(e)}}initStartEndNodes(){const t=Math.round(this.nodes.length/2),e=Math.round(this.nodes[0].length/3),n=this.nodes[0].length-e;this.startNode=this.nodes[t][e],this.startNode.mark(o),this.endNode=this.nodes[t][n],this.endNode.mark(r)}initializeEdges(){for(let t=0;t<this.nodes.length;t++)for(let e=0;e<this.nodes[0].length;e++){const n=this.nodes[t][e];n.edges=this.neighbors(n)}}generateDom(t){this.domElement=document.createElement("table"),t.appendChild(this.domElement);const e=document.createElement("tbody");this.domElement.appendChild(e);for(let t=0;t<this.nodes.length;t++){const n=document.createElement("tr");e.appendChild(n);for(let e=0;e<this.nodes[0].length;e++)this.nodes[t][e].generateDom(),n.appendChild(this.nodes[t][e].domElement)}}neighbors(t){const e=[],n=[[-1,0],[0,1],[1,0],[0,-1]];for(let i of n){const n=t.position[0]+i[0],s=t.position[1]+i[1];this.nodeExists([n,s])&&e.push(this.nodes[n][s])}return e}nodeExists(t){try{return void 0!==this.nodes[t[0]][t[1]]&&this.nodes[t[0]][t[1]].type!==d}catch{return!1}}}const f={recursiveBacktrack:async function(t){for(let e=0;e<t.length;e++)for(let n=0;n<t[0].length;n++){e%5==0&&await c(1),t[e][n].isStartOrEnd()||t[e][n].mark(d)}let e=t[0][0];e.visited=!0;let n=[e];for(;n.length>0;){await c(3);let t=e.unvisitedNeighbours(!0),s=t[l(t.length-1)];for(;s&&(s.visitedNeighbours().length>2||s.isStartOrEnd());){let e=l(t.length-1);s=t[e],t.splice(e,1)}s?(s.visited=!0,e.mark(i),n.push(e),e=s):n.length>0&&(e=n.pop())}h.softReset(t)}},g={breathFirstSearch:async function(t,e){let n={},i=[t];n[t.id]=t;for(;!n[e.id];){let t=i.shift();if(void 0===t)throw new Error("Path doesn't exist");t.isStartOrEnd()||t.mark(s);for(let e of t.neighbours())await c(3),n[e.id]||(e.isStartOrEnd()||e.mark(s),i.push(e),n[e.id]=t)}await v(n,e,t)},depthFirstSearch:async function(t,e){let n={},i=[t];n[t.id]=t,t.visited=!0;let o=t;for(;!n[e.id];){if(void 0===o)throw new Error("Path doesn't exist");let t=o.unvisitedNeighbours();if(await c(3),0===t.length)o=i.pop();else{const r=t[0];o.visited=!0,n[r.id]=o,i.push(r),o=i[i.length-1],o.equals(e)||o.mark(s)}}await v(n,e,t)}};async function v(t,e,n){for(;!e.equals(n);){await c(5);const n=t[e.id];n.isStartOrEnd()||n.mark(a),e=n}}function y(){n(0),document.getElementById("intro-modal").style.display="unset",$("#intro-modal").modal({fadeDuration:1e3,fadeDelay:.5,closeClass:"close-modal"});const t=document.querySelectorAll("button.has-next"),e=document.getElementById("close-modal");function n(t){const e=document.getElementsByClassName("modal-inner")[0];for(let n=0;n<e.children.length;n++)e.children[n].style.display=n===t?"flex":"none"}t.forEach((t,e)=>t.addEventListener("click",t=>{n(e+1)})),e.addEventListener("click",()=>{$("#intro-modal").modal("toggle"),$(".jquery-modal").fadeOut("normal")})}window.addEventListener("load",(async function(){easydropdown("#algorithms-input",{callbacks:{onSelect:async t=>{grid.resetPath(),"bfs"===t&&await g.breathFirstSearch(grid.startNode,grid.endNode),"dfs"===t&&await g.depthFirstSearch(grid.startNode,grid.endNode)}}}),easydropdown("#patterns-input",{callbacks:{onSelect:async t=>{grid.resetPath(),"bm"===t&&await f.recursiveBacktrack(grid.nodes)}}}),easydropdown.all(),document.getElementById("reset").addEventListener("click",()=>{window.grid.reset()}),document.getElementById("about").addEventListener("click",()=>{y()}),function(){const t=document.createElement("div"),e=document.getElementById("controls-container");t.id="grid-container",document.getElementById("container").append(t);const n=window.innerWidth/(window.innerHeight-e.clientHeight),i=40/(Math.round(10*n)/10),s=new p([40,i],t);s.init(),window.grid=s}(),y()}))}]);
//# sourceMappingURL=bundle.js.map